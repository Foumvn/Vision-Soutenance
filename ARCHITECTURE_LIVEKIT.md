# ğŸ—ï¸ Architecture LiveKit Urbania - SchÃ©ma dÃ©taillÃ©

## Vue d'ensemble du systÃ¨me

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           URBANIA - LIVEKIT SYSTEM                          â”‚
â”‚                         Architecture SFU (Selective Forwarding Unit)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 â”‚         â”‚                  â”‚         â”‚                  â”‚
â”‚   FRONTEND      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚    BACKEND       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  LIVEKIT SERVER  â”‚
â”‚   (Next.js)     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚    (FastAPI)     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚      (SFU)       â”‚
â”‚                 â”‚         â”‚                  â”‚         â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      Port 3000                  Port 8000                    Port 7880
                                                           Ports 50000-60000
```

## Composants dÃ©taillÃ©s

### 1. FRONTEND (Next.js/React)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND COMPONENTS                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Dashboard (/dashboard)                                   â”‚    â”‚
â”‚  â”‚ - Bouton "New Meeting"                                   â”‚    â”‚
â”‚  â”‚ - Lien vers /meeting/pre-join                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Pre-Join (/meeting/pre-join)                             â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Nom de la room                                     â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Type d'appel (audio/vidÃ©o)                         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ SÃ©lection participants (depuis contacts)           â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ â€¢ Bouton "DÃ©marrer l'appel"                          â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚              â”‚                                           â”‚    â”‚
â”‚  â”‚              â”‚ createRoom()                              â”‚    â”‚
â”‚  â”‚              â–¼                                           â”‚    â”‚
â”‚  â”‚        POST /api/livekit/rooms                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Room (/meeting/room?room={name})                         â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ 1. GET Token: POST /api/livekit/token               â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ 2. Connect: LiveKitRoom.connect(url, token)         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ 3. VideoConference Component                         â”‚ â”‚    â”‚
â”‚  â”‚ â”‚    - Grid layout participants                        â”‚ â”‚    â”‚
â”‚  â”‚ â”‚    - Video tracks rendering                          â”‚ â”‚    â”‚
â”‚  â”‚ â”‚    - Audio tracks                                    â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ 4. Controls                                          â”‚ â”‚    â”‚
â”‚  â”‚ â”‚    - Mic toggle                                      â”‚ â”‚    â”‚
â”‚  â”‚ â”‚    - Camera toggle                                   â”‚ â”‚    â”‚
â”‚  â”‚ â”‚    - Leave button                                    â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â”‚ onDisconnect()                       â”‚
â”‚                            â–¼                                      â”‚
â”‚                   POST /api/livekit/rooms/{name}/leave           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Invite (/meeting/invite?room={name})                     â”‚    â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚ â”‚ 1. GET /api/livekit/rooms/{name} (affiche info)     â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ 2. Bouton "Rejoindre"                                â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ 3. POST /api/livekit/rooms/{name}/join               â”‚ â”‚    â”‚
â”‚  â”‚ â”‚ 4. Redirect â†’ /meeting/room?room={name}              â”‚ â”‚    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. BACKEND (FastAPI)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       BACKEND API LAYER                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Authentication Layer (JWT)                              â”‚     â”‚
â”‚  â”‚ - get_current_user() dependency                         â”‚     â”‚
â”‚  â”‚ - Validates JWT token on every request                  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ LiveKit Router (/api/livekit)                           â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  POST /token                                             â”‚     â”‚
â”‚  â”‚  â”œâ”€ Input: {room_name, user_id, username}               â”‚     â”‚
â”‚  â”‚  â”œâ”€ Service: LiveKitService.create_token()              â”‚     â”‚
â”‚  â”‚  â””â”€ Output: {token, url, room_name}                     â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  POST /rooms                                             â”‚     â”‚
â”‚  â”‚  â”œâ”€ Input: {room_name, participants[], call_type}       â”‚     â”‚
â”‚  â”‚  â”œâ”€ Storage: active_rooms[room_name] = {...}            â”‚     â”‚
â”‚  â”‚  â””â”€ Output: RoomResponse                                â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  GET /rooms                                              â”‚     â”‚
â”‚  â”‚  â”œâ”€ Filter: user in participants OR user is creator     â”‚     â”‚
â”‚  â”‚  â””â”€ Output: List[RoomResponse]                          â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  GET /rooms/{room_name}                                  â”‚     â”‚
â”‚  â”‚  â””â”€ Output: RoomResponse                                â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  POST /rooms/{room_name}/join                           â”‚     â”‚
â”‚  â”‚  â”œâ”€ Add user to participants[]                          â”‚     â”‚
â”‚  â”‚  â”œâ”€ Update status to ACTIVE                             â”‚     â”‚
â”‚  â”‚  â””â”€ Output: {message, room_name}                        â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  POST /rooms/{room_name}/leave                          â”‚     â”‚
â”‚  â”‚  â”œâ”€ Remove user from participants[]                     â”‚     â”‚
â”‚  â”‚  â”œâ”€ If empty â†’ status = ENDED                           â”‚     â”‚
â”‚  â”‚  â””â”€ Output: {message}                                   â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  DELETE /rooms/{room_name}                              â”‚     â”‚
â”‚  â”‚  â”œâ”€ Check: user is creator                              â”‚     â”‚
â”‚  â”‚  â”œâ”€ Delete from active_rooms                            â”‚     â”‚
â”‚  â”‚  â””â”€ Output: {message}                                   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ LiveKit Service                                         â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  create_token():                                         â”‚     â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚     â”‚
â”‚  â”‚  â”‚ 1. Create AccessToken(api_key, api_secret)     â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ 2. Set identity & name                         â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ 3. Add VideoGrants:                            â”‚    â”‚     â”‚
â”‚  â”‚  â”‚    - room_join=True                            â”‚    â”‚     â”‚
â”‚  â”‚  â”‚    - room=room_name                            â”‚    â”‚     â”‚
â”‚  â”‚  â”‚    - can_publish=True                          â”‚    â”‚     â”‚
â”‚  â”‚  â”‚    - can_subscribe=True                        â”‚    â”‚     â”‚
â”‚  â”‚  â”‚    - can_publish_data=True                     â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ 4. Sign with secret                            â”‚    â”‚     â”‚
â”‚  â”‚  â”‚ 5. Return JWT token                            â”‚    â”‚     â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Storage (In-Memory - for now)                           â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  active_rooms = {                                        â”‚     â”‚
â”‚  â”‚    "room-123": {                                         â”‚     â”‚
â”‚  â”‚      room_name: "room-123",                              â”‚     â”‚
â”‚  â”‚      created_at: datetime,                               â”‚     â”‚
â”‚  â”‚      created_by: "user-1",                               â”‚     â”‚
â”‚  â”‚      participants: ["user-1", "user-2"],                 â”‚     â”‚
â”‚  â”‚      call_type: "video",                                 â”‚     â”‚
â”‚  â”‚      status: "active"                                    â”‚     â”‚
â”‚  â”‚    }                                                      â”‚     â”‚
â”‚  â”‚  }                                                        â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  TODO: Migrate to MongoDB                                â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. LIVEKIT SERVER

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LIVEKIT SFU SERVER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ WebSocket Server (port 7880)                            â”‚     â”‚
â”‚  â”‚ - Accepts client connections                            â”‚     â”‚
â”‚  â”‚ - Validates JWT tokens                                  â”‚     â”‚
â”‚  â”‚ - Manages rooms                                         â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ Room Management                                         â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  room-123:                                               â”‚     â”‚
â”‚  â”‚  â”œâ”€ Participant 1 (user-1)                              â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Video Track                                      â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Audio Track                                      â”‚     â”‚
â”‚  â”‚  â”‚  â””â”€ Data Channel                                     â”‚     â”‚
â”‚  â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  â”œâ”€ Participant 2 (user-2)                              â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Video Track                                      â”‚     â”‚
â”‚  â”‚  â”‚  â”œâ”€ Audio Track                                      â”‚     â”‚
â”‚  â”‚  â”‚  â””â”€ Data Channel                                     â”‚     â”‚
â”‚  â”‚  â”‚                                                       â”‚     â”‚
â”‚  â”‚  â””â”€ Participant N                                       â”‚     â”‚
â”‚  â”‚     â””â”€ ...                                               â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ SFU (Selective Forwarding Unit)                         â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  Participant 1                  Participant 2            â”‚     â”‚
â”‚  â”‚       â”‚                               â”‚                  â”‚     â”‚
â”‚  â”‚       â”‚ Publish Video/Audio           â”‚                  â”‚     â”‚
â”‚  â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                  â”‚     â”‚
â”‚  â”‚       â”‚                               â”‚                  â”‚     â”‚
â”‚  â”‚       â”‚                               â”‚ Publish          â”‚     â”‚
â”‚  â”‚       â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                  â”‚     â”‚
â”‚  â”‚       â”‚                               â”‚                  â”‚     â”‚
â”‚  â”‚       â”‚         SFU Routes            â”‚                  â”‚     â”‚
â”‚  â”‚       â”‚      Don't Re-encode          â”‚                  â”‚     â”‚
â”‚  â”‚       â”‚     Just Forward Streams      â”‚                  â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  Benefits:                                               â”‚     â”‚
â”‚  â”‚  - Low latency                                           â”‚     â”‚
â”‚  â”‚  - Scalable (server doesn't decode/encode)              â”‚     â”‚
â”‚  â”‚  - High quality (original streams)                       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                            â”‚                                      â”‚
â”‚                            â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ WebRTC Transport (UDP ports 50000-60000)               â”‚     â”‚
â”‚  â”‚                                                          â”‚     â”‚
â”‚  â”‚  - STUN/TURN for NAT traversal                          â”‚     â”‚
â”‚  â”‚  - ICE candidates exchange                              â”‚     â”‚
â”‚  â”‚  - Peer connections                                     â”‚     â”‚
â”‚  â”‚  - Media streams (RTP/RTCP)                             â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Flux de donnÃ©es complet

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        FLOW: CREATE & JOIN CALL                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

USER 1 (Caller)                BACKEND                    LIVEKIT SERVER
      â”‚                           â”‚                              â”‚
      â”‚  1. Click "New Meeting"   â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  2. Fill form             â”‚                              â”‚
      â”‚     (name, type, users)   â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  3. POST /rooms           â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚                           â”‚  4. Create room in memory    â”‚
      â”‚                           â”‚     active_rooms[name] = {}  â”‚
      â”‚                           â”‚                              â”‚
      â”‚  5. 201 Created           â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  6. Redirect to           â”‚                              â”‚
      â”‚     /meeting/room?room=X  â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  7. POST /token           â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚                           â”‚  8. Generate JWT             â”‚
      â”‚                           â”‚     LiveKitService.create_token()
      â”‚                           â”‚     - Sign with secret       â”‚
      â”‚                           â”‚     - Set permissions        â”‚
      â”‚                           â”‚                              â”‚
      â”‚  9. {token, url}          â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  10. Connect WebSocket    â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚      ws://localhost:7880 + token                         â”‚
      â”‚                           â”‚                              â”‚
      â”‚                           â”‚                       11. Validate token
      â”‚                           â”‚                       12. Create room
      â”‚                           â”‚                       13. Add participant
      â”‚                           â”‚                              â”‚
      â”‚  14. WebRTC negotiation   â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                           â”‚                              â”‚
      â”‚  15. Video/Audio streaming starts ğŸ¥ğŸ¤                   â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                           â”‚                              â”‚
      
      
USER 2 (Invitee)                                                  
      â”‚                           â”‚                              â”‚
      â”‚  16. Receive invite link  â”‚                              â”‚
      â”‚      /meeting/invite?     â”‚                              â”‚
      â”‚      room=X               â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  17. GET /rooms/X         â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  18. Room info            â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  19. Click "Join"         â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  20. POST /rooms/X/join   â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚                           â”‚  21. Add to participants[]   â”‚
      â”‚                           â”‚      Update status=ACTIVE    â”‚
      â”‚                           â”‚                              â”‚
      â”‚  22. Success              â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  23. Redirect to room     â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  24. POST /token          â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  25. {token, url}         â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                              â”‚
      â”‚                           â”‚                              â”‚
      â”‚  26. Connect WebSocket    â”‚                              â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                           â”‚                              â”‚
      â”‚                           â”‚                       27. Validate
      â”‚                           â”‚                       28. Join room
      â”‚                           â”‚                              â”‚
      â”‚  29. WebRTC negotiation   â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚
      â”‚                           â”‚                              â”‚
      â”‚  30. Both users see each other! ğŸ‰                       â”‚
      â”‚                           â”‚                              â”‚
      â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚  Video feeds from both participants                      â”‚
      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
      â”‚                           â”‚                              â”‚
```

## SÃ©curitÃ© - Double authentification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SECURITY LAYERS                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Layer 1: JWT Authentication (Backend)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  User Login                          â”‚
â”‚    â”œâ”€ POST /api/auth/login          â”‚
â”‚    â”‚   {email, password}             â”‚
â”‚    â”‚                                 â”‚
â”‚    â””â”€â–¶ JWT Token (30 min)            â”‚
â”‚        Stored in localStorage        â”‚
â”‚        Used for all API calls        â”‚
â”‚        Header: "Bearer <token>"      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
Layer 2: LiveKit Token (Room Access)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Room Access                         â”‚
â”‚    â”œâ”€ POST /api/livekit/token       â”‚
â”‚    â”‚   (with JWT in header)          â”‚
â”‚    â”‚                                 â”‚
â”‚    â””â”€â–¶ LiveKit Token                 â”‚
â”‚        Short-lived (per room)        â”‚
â”‚        Contains:                     â”‚
â”‚        - User identity               â”‚
â”‚        - Room name                   â”‚
â”‚        - Permissions                 â”‚
â”‚        - Expiry                      â”‚
â”‚        Signed with LIVEKIT_SECRET    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
Layer 3: WebSocket Connection
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LiveKit Server                      â”‚
â”‚    â”œâ”€ Validates LiveKit token       â”‚
â”‚    â”œâ”€ Checks signature               â”‚
â”‚    â”œâ”€ Verifies expiry                â”‚
â”‚    â”œâ”€ Confirms permissions           â”‚
â”‚    â”‚                                 â”‚
â”‚    â””â”€â–¶ Grants room access            â”‚
â”‚        âœ… User can publish/subscribe â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Technologies utilisÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            TECH STACK                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                           â”‚
â”‚  Frontend:                         Backend:                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”€â”€â”€â”€â”€â”€â”€â”€                              â”‚
â”‚  â€¢ Next.js 16.1.4                  â€¢ FastAPI 0.128.0                     â”‚
â”‚  â€¢ React 19.2.3                    â€¢ Python 3.12                         â”‚
â”‚  â€¢ TypeScript 5                    â€¢ Motor (MongoDB async)               â”‚
â”‚  â€¢ Tailwind CSS 4                  â€¢ Pydantic 2.12                       â”‚
â”‚  â€¢ Framer Motion 12.28             â€¢ Python-JOSE (JWT)                   â”‚
â”‚  â€¢ @livekit/components-react       â€¢ Passlib (password hash)            â”‚
â”‚  â€¢ @livekit/components-styles      â€¢ Uvicorn (ASGI server)              â”‚
â”‚  â€¢ livekit-client                  â€¢ livekit 1.0.23                      â”‚
â”‚                                    â€¢ livekit-api 1.1.0                   â”‚
â”‚                                                                           â”‚
â”‚  LiveKit Server:                   Database:                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚  â€¢ LiveKit 1.9.0                   â€¢ MongoDB 7.x (Docker)                â”‚
â”‚  â€¢ WebRTC (SFU)                    â€¢ Port: 27018                         â”‚
â”‚  â€¢ Port: 7880 (WS)                 â€¢ Async driver (Motor)                â”‚
â”‚  â€¢ Ports: 50000-60000 (RTC)                                              â”‚
â”‚                                                                           â”‚
â”‚  Infrastructure:                   Tools:                                â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”€â”€â”€â”€â”€â”€                                â”‚
â”‚  â€¢ Docker (MongoDB)                â€¢ npm (Frontend deps)                 â”‚
â”‚  â€¢ Bash scripts                    â€¢ pip (Backend deps)                  â”‚
â”‚  â€¢ Process management (PID)        â€¢ Git                                 â”‚
â”‚                                    â€¢ VS Code / Cursor                    â”‚
â”‚                                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Architecture designed for scalability, security, and real-time performance** ğŸš€
